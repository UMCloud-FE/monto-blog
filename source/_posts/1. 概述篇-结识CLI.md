---
layout: post
title: 一、概述篇 | 结识CLI
date: 2023-05-30 18:49:32
tags: CLI
categories:
  - CLI
---

# 概述篇 | 结识CLI

[课程结构思维导图]

本文是关于《node命令行开发实战》小册课程的学习指导，旨在帮助大家快速了解什么是命令行开发，并在本节阐述课程的概要。

本课程针对的是对 Node.js 有一定了解的初学者、有几年前端经验的开发者和管理者，或者是需要进行命令行工具企业级开发的工程师，以及对命令行工具开发感兴趣的同学。对于还未购买小册的同学，可以通过课程目录和简介初步了解一下将要学习的内容，以便更好的上手。

## 命令行界面

**命令行界面** （Command-Line interface，CLI，下面简称为 CLI）是客户端交互的一种表现形式，它通常不支持鼠标，用户通过键盘输入指令，计算机接收到指令后，予以执行。也有人称之为**字符用户界面**（character user interface, CUI）。通俗的讲，就是**用户与机器交互的媒介**，与其同类型的还有传统图形交互界面（Graphics User Interface，GUI）、侧重于多感官的自然用户界面（nature user interface，NUI）、基于AI模型的智能用户界面（intelligent user interface，IUI）等。他们有个统称，叫人机交互（Human-Computer Interaction，HCI）。

[命令行终端的界面图]

CLI 通过用户在终端界面输入对应的指令，通过客户端代码的计算来返回给用户文字显示的界面相应。我们说的 CLI 开发，指的就是这中间客户端代码的开发。对于前端开发来讲，`npm`、`create-react-app`、`create-vue`等都会比较熟悉，可以通过简单的指令输入就可以生成模板文件进行快速开发，这就是提升开发效率的一种体现。

[CLI 使用流程图]

#### 1. 为什么是 CLI ？

CLI 是 GUI 出现之前使用最广泛的计算机交互技术，它有以下几点局限：

- 使用不直观，不利于计算机技术普及
- 强依赖记忆，导致学习曲线陡峭
- 应用场景单一，不适合不用文字输入的场景
- 可移植性不强

尽管有如上不足，而且现代 HCI 技术已经非常发达，但传统 CLI 依然有其重要的存在和优势：

-   效率：熟练的用户可以通过**键入少量命令来完成复杂的操作**，而无需通过图形界面进行多次点击和导航。
-   自动化：**CLI 非常适合自动化任务**。通过脚本和命令序列，可以批量执行任务和操作，从而节省时间和精力，这个是图形界面不具备的。
-   标准化：**CLI 可以帮助团队成员统一操作**。统一创建项目、生成方案埋点、统一 CSS 方案、git 操作、发布规范、代码规范、统一日志统计等。
-   远程管理：CLI 可以通过 SSH 等协议远程管理服务器和网络设备，使得**远程操作和管理变得便捷**。
-   资源消耗：**CLI 通常占用较少的系统资源**，特别是在资源有限的环境下（如服务器），CLI 是非常实用的工具。
-   学习曲线：对于一些专业用户和开发人员来说，CLI 可能更加**直观和高效**。有些任务在命令行下可以更快地完成，而且对于技术人员来说，CLI通常是日常工作中必备的工具。
-   批处理：在处理大量数据和文件时，CLI 的**批处理功能非常强大**。它可以帮助用户更轻松地进行数据处理、文件重命名、搜索等操作，而且在海量分布式计算机上同步操作时，GUI 往往力有不逮。
-   可编程性：CLI 通常**可以通过自定义脚本来扩展其功能**，使得用户可以根据自己的需求定制交互式体验。
-   发展性：CLI 虽然历史老，但并不是止步不前的，互联网的接入、AI的协助，越来越多的插件系统的发展，使得 CLI 焕发了第二春。

可以看到，在很多场景下，CLI 依然有它独特的地位。那么，有哪些具体的业务场景和开发痛点需要使用 CLI 解决呢？我们结合具体的业务场景来阐述。作者所在公司为例，下面是某开发部门的开发架构示意图：

![CLI业务场景.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/edc70927dc7c414db1c59312a87a3f76~tplv-k3u1fbpfcp-watermark.image?)

可以看到，**CLI 贯穿整个团队基础架构的生命周期**。前端项目通过微服务启动器创建，需要 CLI 作为启动媒介，并自动获取 webpack、eslint 配置以及公用依赖组件，这种规范化对于大型团队协作是必须的；同时，在项目开发过程中，也需要借助 CLI 生成公共模板组件、通用样式等；在打包发布时，可以通过 CLI + CI/CD 来自动注册企业灰度系统，并发布在指定环境中。

按照我们上面的讲述，可以给CLI一个定位：`CLI是给相关开发人员进行高效的团队合作的有力工具`。展开来说可以总结为如下几点：

-   是大多数程序员的必备技能
-   是基础架构团队必备的工具
-   可以跨越的业务很广（管理后台 - 业务组件与平台 - 客户产品前后端开发与构建 - 统计服务 - 自动化构建）
-   可以跨越的技术场景很广（开发 - 构建 - 测试 - 发布）

> **与 devOps 工具的区别**：devOps工具，类似 Jenkins，gitLab CI/CD等，通常在 git hook 中触发，在服务端进行，无法覆盖研发人员本地的开发/调试功能，而且定制复杂，对语言有一定的要求，需要专业的运维人员来操作。

#### 2. 为什么是 Node.js ？

CLI 开发，其实就是基于操作系统终端的客户端软件的开发。除了 nodejs，有不少语言都可以进行开发，比如：

- **Python**：同样是一本脚本语言，它有许多库和工具，如Argparse，可以帮助轻松创建命令行界面，跨平台性好
- **C/C++**：这些低级语言可以用于构建高性能的CLI工具，但相对而言，它们可能需要更多的代码来处理命令行参数
- **Shell脚本**： 如果只是需要简单的命令，可以使用Bash、PowerShell或其他Shell脚本语言来创建所需的命令行工具。

此外，Ruby、Rust 等语言都可以开发 CLI，他们也各有特点。本文采用 Node.js 来开发，一方面是面向前端开发人员，另一方面也是因为 Node.js 的综合优势：

- **跨平台性好**：可以在多个操作系统上运行，这使得可以轻松为不同的平台创建CLI工具，而无需大幅修改代码
- **异步编程：** JavaScript和Node.js以非阻塞的方式处理任务，这意味着您可以轻松编写异步CLI工具，而无需担心阻塞问题。这在处理IO密集型操作时特别有用。
- **丰富的包管理：** Node.js的npm（Node Package Manager）提供了数以万计的开源包，这些包包含了各种功能，可帮助您快速构建CLI工具，而不必从头开始编写所有代码。
- **社区支持：** Node.js有一个庞大且活跃的开发社区，这意味着您可以轻松找到文档、教程和支持，以解决遇到的问题。
-  **易学易用：** 对于前端开发人员来说，使用Node.js开发CLI工具是一种自然的过渡，因为他们已经熟悉JavaScript。这降低了学习曲线。
-  **可扩展性：** 您可以使用Node.js轻松构建可扩展的CLI工具，通过模块化的方式组织代码，允许您添加新功能或扩展现有功能。
- **可以生成单个可执行文件：** 使用工具如pkg或nexe，可以将Node.js CLI工具静态编译为单个可执行文件，这样用户无需安装Node.js即可运行您的工具。
- **高性能：** Node.js在执行I/O密集型操作时表现出色，这使其非常适合需要处理文件、网络请求或数据库操作等任务的CLI工具。此外，它的事件驱动非阻塞IO模型有助于处理高并发。

出于上述原因，我们选择了Node.js作为开发语言，用以演示本课程中的各个示例。

## 课程目的
 
本课程旨在让大家能够入门 nodejs 命令行界面的系统性开发，并在业务开发中得以应用。此外，作者也希望以本课程为媒介，促进大家的相互交流和探讨，以促进知识共享和协作学习。

## 收获

通过本课程的学习，你将有如下收获：

1. 了解命令行工具的前世今生
2. 了解如何使用 nodejs 搭建一个自己的命令行工具
3. 了解命令行工具的运行原理
4. 学会如何使用前端工程化规范约束项目代码
5. 学会如何写单元测试
6. 了解CJS和ESM模式的区别
7. 学会用自建的命令行工具解决实际业务问题
8. 学会跨平台兼容
9. 学会使用rollup打包项目
10. 学会接入Github Action 实现自动化部署
11. 学会npm版本管理
12. 学会开发VSCode插件来管理命令行工具
13. 学会使用tapabble管理 CLI 工具的生命周期
14. 学会..



## 章节目录

下面是本系列课程的目录，供大家阅览：

- 结识CLI（概述篇）
- 结识CLI（应用篇）<初始化，原生使用>
- CLI 常用的工具库介绍
- 结识CLI（原理篇）
- 使用CLI实现前端接口Mock功能（实践篇）
- 使用CLI实现前端云组件模板管理功能（实践篇）
- 使用CLI实现前端项目自动化部署（实践篇）
- 撰写CLI的单元测试 \<vitest>
- 将我们的 CLI 发布 NPM 仓库与版本控制 <需讲述依赖在本地和远程两种情况>
- 实现CLI本地日志功能
- 扩展：给我们的CLI一个更好的展示 \<welcome页、用户文档等>
- 扩展：给体量过大的 CLI 项目添加包管理工具 \<lerna>
